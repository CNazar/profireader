{% extends "_ruslan/_index_layout.html" %}
{% block title %}Profireader{% endblock title %}
{% block head %}
    {{ super() }}
    {% include 'partials/empty_page.html' %}
{% endblock head %}

{% block portal_base %}
    {% include 'partials/portal_base_Profireader.html' %}
{% endblock portal_base %}
{% block portal_content %}
    <script>
    function load_portals(){
        var portals_name = [];
        portals = {{ portals|tojson }};
        for(var i=0;i<portals.length;i++){
            portals_name.push({label: portals[i][1], id: portals[i][0]})
        }
        $( "#portal_search" ).autocomplete({
      source: portals_name,
            select: function(e, ui) {
                window.location.href = '/subscribe/' + ui.item.id;
    }
    });

    }
    </script>
           {{ _('Please, subscribe to any portal') }}
    </br>
    <label for="portal_search">Search</label>
    <input id="portal_search" type="text"><script>load_portals()</script>
          {% for portal in portals %}
   <h2>{{ portal[1] }}<a href="{{ url_for('reader.reader_subscribe', portal_id=portal[0]) }}"> - Subscribe</a></h2>
          {% endfor %}
    {{ __('Presentation text') }}
{% endblock portal_content %}
